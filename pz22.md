## Практическое занятие №22. Разграничение прав доступа в ОС Ubuntu

### Ход работы

1. Вернуть сеть NAT на ВМ ubuntu
1. Создать пользователя по шаблону Surname, где Surname - ваша фамилия. Войти под этим пользователем в графическом режиме.
1. Добавить пользователя Surname в sudo-пользователи.
1. Создать в /home каталог dir. Владельцем назначить Surname. Группу-владельца задать как группу an. Выяснить, что значат права rwx для каталога.
2. Найти исполняемый файл для команды ping. Определить права доступа на этот файл. Что означает SUID-бит?
3. Выяснить права на каталог /tmp. Что значит sticky bit?
4. В /home/dir/ создать who.c, который должен содержать 

    ```c
    #include <stdio.h>
    #include <unistd.h>
    
    int main()
    {
    	printf("UID=%d, but effective UID=%d\n", getuid(), geteuid());
    	return 0;
    }
    ```
    Скомпилировать этот файл с помощью
    
    ```bash
    gcc -o WHO who.c
    ```
    С помощью SUID-бита сделать так, чтобы запуск WHO выводил на экран id вашего пользователя, а эффективный id - пользователя root.
5. Создать исполняемый файл, который ведёт себя как фоновый процесс (демон в терминологии Linux-систем). Для этого при старте этого процесса необходимо создавать так называемый .pid файл - файл, в который записывается PID запущенного процесса. При старте необходимо проверять, есть ли .pid файл, если есть - проверять наличие процесса с указанным pid. Если такой процесс уже существует, то писать об этом в стандартный поток ошибок и завершаться. Если .pid файла нет, либо нет указанного процесса, то стартовать как фоновый процесс, записывая в .pid файл свой PID.
6. Рассмотрим подробнее правильный порядок изменения сетевого имени компьютера. Необходимо внести изменения в три места

    ```bash
    # изменяет текущее сетевое имя
    sudo hostname Surname
    # изменяет сетевое имя, которое будет выставлено после перезагрузки
    sudo nano /etc/hostname
    # изменяет сетевое имя для адреся 127.0.0.1, то есть localhost
    sudo nano /etc/hosts
    ```
1. Разобраться с командой zip. Заархивируйте с различным уровнем сжатия короткий текст (100 символов), длинный текст (10к символов), картинку (возьмите любые фото с хостовой или гостевой ОС).
2. Разобраться с командой tar. Чем отличается архивирование от сжатия? Получите архив формата .tar.gz, заархивировав некоторый каталог.