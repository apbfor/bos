## Практическое занятие №17. Удалённый рабочий стол

[Шаблон документа для ЛР](http://gitlabnto/anetto/wiki/wikis/%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD-%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%BE%D0%B2)

### Термины, которые нужно усвоить
1. RDP
2. Firewall
3. "Стойкий" 

### Ход работы

1. Настройка сети
	- NAT (по-умолчанию)
	
	Другие варианты сетевых интерфейсов (**не настраивать на этом занятии**)
	- Мост (Bridget): настройки сетевого интерфейса гостевой ОС будут действительны в реальной сети.
	- Host only: сетевое взаимодействие возможно только с хостовой ОС и другими виртуальными машинами с такой же настройкой сети.
	- VMNet0-VMNet15: выбор конкретной виртуальной сети (некоторые уже настроены по-умолчанию, например, VMNet1 - это Host only). VMNet могут взаимодействовать с хостовой ОС через виртуальный адаптер.
	- Сегмент виртуальной сети: виртуальная сеть только между виртуальными машинами (упрощённая реализация сетевой подсистемы).

1. Из гостевой ОС зайти на \\RACKSTATION\home. В поле логина нужно ввести CC\user, где CC (английскими буквами - это название домена В НТО, по умолчанию WORKGROUP), а user - имя вашей учётной записи от хостовой ОС, пароль - также от хостовой ОС. Создать файл с придуманными вами паролями (или подсказками для них) учётных записей гостевой ОС (чтоб не забыть) сохранить на \\RACKSTATION\home в файле passwords.txt.
	**показать преподавателю**

2. Создание локальных пользователей в гостевой ОС
	- создать локального пользователя (не администратора),	**показать преподавателю**
	
	Попробовать другие варианты управления учётными записями:
	- консольная команда "net user ..." (не забудьте запустить терминал от имени администратора)
	- Через графический интерфейс: "Панель управления" \ "Учетные записи пользователей" \ "Учетные записи пользователей" \ "Управление учетными записями" (можно попасть в это диалоговое выбрав "Изменение типа..." или "Удаление...") \ "Добавить учётную запись пользователя" \ "Вход без учётной записи Microsoft"
	- Консольная команда **control userpasswords2**, в возникшем окне кнопка "Добавить"

3. Удалённый рабочий стол на гостевой ОС
	- Попробовать зайти "Удалённым рабочим столом" из хостовой ОС в гостевую (по имени или по IP-адресу) с учётными данными созданного в п.2 пользователя
	- В гостевой ОС разрешить подключение удалённым рабочим столом для созданного пользователя: "Система" (можно через Win + X) \ "Удалённый рабочий стол". Внизу есть кнопка "выберите пользователей, которые могут получить удалённый доступ", в этом меню нужно добавить необходимого пользователя
	- Зайти удалённым рабочим столом

4. Использование Firewall для защиты
	- Настройка Firewall ("Брандмауэр защитника Windows" \ "Дополнительные параметры"): создать новое правило, в котором запретить RDP: протокол TCP, порт 3389).
	- Снова попробовать войти удалённым рабочим столом, **показать преподавателю**
	- Удалить созданное правило Firewall
	
    Изучите, какие ограничения можно задавать в правилах Firewall.
